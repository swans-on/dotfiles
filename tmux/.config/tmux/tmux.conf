# TPM Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Enable tmux server with systemd
set -g @continuum-boot 'on'

# Continuum status in tmux status line
set -g status-right 'Continuum status: #{continuum_status}'

# Remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# C-a C-a for last active window
bind-key C-a last-window

# Reload tmux config
bind r source-file ~/.config/tmux/tmux.conf

# Kill window (override default binding to show the pane #)
bind q killw

# Enable mouse support
setw -g mouse on

# Vim-like copying
setw -g mode-keys vi

# Use 'v' to begin selection (character-wise)
bind-key -T copy-mode-vi 'v' send -X begin-selection

# Use 'V' (Shift+v) to select entire lines (line-wise selection)
bind-key -T copy-mode-vi 'V' send -X select-line

# Use 'C-v' (Ctrl+v) to begin rectangular selection (block-wise)
bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle

# ** WAYLAND-SPECIFIC COPY/YANK **
# Use 'y' to yank/copy the selected text and pipe it to 'wl-copy'.
# This copies the text directly to the system clipboard (Wayland's primary selection).
# Requires the 'wl-clipboard' package (containing 'wl-copy').
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel "wl-copy"

# Paste from the TMUX buffer (default)
bind-key 'p' paste-buffer

# Paste directly from the Wayland clipboard using 'wl-paste'.
bind-key 'P' run "wl-paste | tmux load-buffer -" \; paste-buffer

# Sensible split commands
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Star window numbering at 1
set -g base-index 1

# Statusline
#set-option -g status-right ''
set-option -g status-left  ''

# Colors
set -g default-terminal "xterm-256color"

# Pane Display Colors (when you hit prefix + w)
set -g display-panes-active-colour colour28 # Replaced colour32 (Bright Green)
set -g display-panes-colour        colour22 # Replaced colour25 (Dark Green)
set -g display-panes-time          12000

# Use default background colors so they match terminal background
set -g message-style 'bg=default,fg=default'  # Command line and prompts

# Pane Borders
set -g pane-border-style  'bg=default,fg=colour22' # Replaced colour25 (Dark Green)
set -g pane-active-border-style 'bg=default,fg=colour28' # Replaced colour32 (Bright Green)

# Status Bar Colors
set -g status-style 'bg=colour22,fg=colour11'  # Replaced colour25 (Dark Green BG)
set -g window-status-style 'bg=colour22,fg=colour117'  # Replaced colour25 (Dark Green BG, White/Light FG)
set -g window-status-current-style 'bg=colour28,fg=colour255'  # Replaced colour32 (Medium Green BG, White FG)
set -g window-status-activity-style 'bg=colour202,fg=colour22' # Replaced colour25 (Dark Green FG)

# Clipboard Selection
set -g mode-style 'bg=colour22,fg=colour117'  # Replaced colour25 (Dark Green BG, White/Light FG)

set -g set-clipboard on

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
